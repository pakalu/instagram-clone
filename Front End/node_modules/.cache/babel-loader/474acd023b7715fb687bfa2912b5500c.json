{"ast":null,"code":"'use strict';\n/**\n * Copyright (c) 2010-2017 Brian Carlson (brian.m.carlson@gmail.com)\n * All rights reserved.\n *\n * This source code is licensed under the MIT license found in the\n * README.md file in the root directory of this source tree.\n */\n\nvar dns = require('dns');\n\nvar defaults = require('./defaults');\n\nvar parse = require('pg-connection-string').parse; // parses a connection string\n\n\nvar val = function (key, config, envVar) {\n  if (envVar === undefined) {\n    envVar = process.env['PG' + key.toUpperCase()];\n  } else if (envVar === false) {// do nothing ... use false\n  } else {\n    envVar = process.env[envVar];\n  }\n\n  return config[key] || envVar || defaults[key];\n};\n\nvar readSSLConfigFromEnvironment = function () {\n  switch (process.env.PGSSLMODE) {\n    case 'disable':\n      return false;\n\n    case 'prefer':\n    case 'require':\n    case 'verify-ca':\n    case 'verify-full':\n      return true;\n\n    case 'no-verify':\n      return {\n        rejectUnauthorized: false\n      };\n  }\n\n  return defaults.ssl;\n};\n\nvar ConnectionParameters = function (config) {\n  // if a string is passed, it is a raw connection string so we parse it into a config\n  config = typeof config === 'string' ? parse(config) : config || {}; // if the config has a connectionString defined, parse IT into the config we use\n  // this will override other default values with what is stored in connectionString\n\n  if (config.connectionString) {\n    config = Object.assign({}, config, parse(config.connectionString));\n  }\n\n  this.user = val('user', config);\n  this.database = val('database', config);\n\n  if (this.database === undefined) {\n    this.database = this.user;\n  }\n\n  this.port = parseInt(val('port', config), 10);\n  this.host = val('host', config); // \"hiding\" the password so it doesn't show up in stack traces\n  // or if the client is console.logged\n\n  Object.defineProperty(this, 'password', {\n    configurable: true,\n    enumerable: false,\n    writable: true,\n    value: val('password', config)\n  });\n  this.binary = val('binary', config);\n  this.ssl = typeof config.ssl === 'undefined' ? readSSLConfigFromEnvironment() : config.ssl; // support passing in ssl=no-verify via connection string\n\n  if (this.ssl === 'no-verify') {\n    this.ssl = {\n      rejectUnauthorized: false\n    };\n  }\n\n  this.client_encoding = val('client_encoding', config);\n  this.replication = val('replication', config); // a domain socket begins with '/'\n\n  this.isDomainSocket = !(this.host || '').indexOf('/');\n  this.application_name = val('application_name', config, 'PGAPPNAME');\n  this.fallback_application_name = val('fallback_application_name', config, false);\n  this.statement_timeout = val('statement_timeout', config, false);\n  this.idle_in_transaction_session_timeout = val('idle_in_transaction_session_timeout', config, false);\n  this.query_timeout = val('query_timeout', config, false);\n\n  if (config.connectionTimeoutMillis === undefined) {\n    this.connect_timeout = process.env.PGCONNECT_TIMEOUT || 0;\n  } else {\n    this.connect_timeout = Math.floor(config.connectionTimeoutMillis / 1000);\n  }\n\n  if (config.keepAlive === false) {\n    this.keepalives = 0;\n  } else if (config.keepAlive === true) {\n    this.keepalives = 1;\n  }\n\n  if (typeof config.keepAliveInitialDelayMillis === 'number') {\n    this.keepalives_idle = Math.floor(config.keepAliveInitialDelayMillis / 1000);\n  }\n}; // Convert arg to a string, surround in single quotes, and escape single quotes and backslashes\n\n\nvar quoteParamValue = function (value) {\n  return \"'\" + ('' + value).replace(/\\\\/g, '\\\\\\\\').replace(/'/g, \"\\\\'\") + \"'\";\n};\n\nvar add = function (params, config, paramName) {\n  var value = config[paramName];\n\n  if (value !== undefined && value !== null) {\n    params.push(paramName + '=' + quoteParamValue(value));\n  }\n};\n\nConnectionParameters.prototype.getLibpqConnectionString = function (cb) {\n  var params = [];\n  add(params, this, 'user');\n  add(params, this, 'password');\n  add(params, this, 'port');\n  add(params, this, 'application_name');\n  add(params, this, 'fallback_application_name');\n  add(params, this, 'connect_timeout');\n  var ssl = typeof this.ssl === 'object' ? this.ssl : this.ssl ? {\n    sslmode: this.ssl\n  } : {};\n  add(params, ssl, 'sslmode');\n  add(params, ssl, 'sslca');\n  add(params, ssl, 'sslkey');\n  add(params, ssl, 'sslcert');\n  add(params, ssl, 'sslrootcert');\n\n  if (this.database) {\n    params.push('dbname=' + quoteParamValue(this.database));\n  }\n\n  if (this.replication) {\n    params.push('replication=' + quoteParamValue(this.replication));\n  }\n\n  if (this.host) {\n    params.push('host=' + quoteParamValue(this.host));\n  }\n\n  if (this.isDomainSocket) {\n    return cb(null, params.join(' '));\n  }\n\n  if (this.client_encoding) {\n    params.push('client_encoding=' + quoteParamValue(this.client_encoding));\n  }\n\n  dns.lookup(this.host, function (err, address) {\n    if (err) return cb(err, null);\n    params.push('hostaddr=' + quoteParamValue(address));\n    return cb(null, params.join(' '));\n  });\n};\n\nmodule.exports = ConnectionParameters;","map":{"version":3,"sources":["/Users/rafidhossain/Desktop/Instagram/instagram/Back End/node_modules/pg/lib/connection-parameters.js"],"names":["dns","require","defaults","parse","val","key","config","envVar","undefined","process","env","toUpperCase","readSSLConfigFromEnvironment","PGSSLMODE","rejectUnauthorized","ssl","ConnectionParameters","connectionString","Object","assign","user","database","port","parseInt","host","defineProperty","configurable","enumerable","writable","value","binary","client_encoding","replication","isDomainSocket","indexOf","application_name","fallback_application_name","statement_timeout","idle_in_transaction_session_timeout","query_timeout","connectionTimeoutMillis","connect_timeout","PGCONNECT_TIMEOUT","Math","floor","keepAlive","keepalives","keepAliveInitialDelayMillis","keepalives_idle","quoteParamValue","replace","add","params","paramName","push","prototype","getLibpqConnectionString","cb","sslmode","join","lookup","err","address","module","exports"],"mappings":"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","sourcesContent":["'use strict'\n/**\n * Copyright (c) 2010-2017 Brian Carlson (brian.m.carlson@gmail.com)\n * All rights reserved.\n *\n * This source code is licensed under the MIT license found in the\n * README.md file in the root directory of this source tree.\n */\n\nvar dns = require('dns')\n\nvar defaults = require('./defaults')\n\nvar parse = require('pg-connection-string').parse // parses a connection string\n\nvar val = function (key, config, envVar) {\n  if (envVar === undefined) {\n    envVar = process.env['PG' + key.toUpperCase()]\n  } else if (envVar === false) {\n    // do nothing ... use false\n  } else {\n    envVar = process.env[envVar]\n  }\n\n  return config[key] || envVar || defaults[key]\n}\n\nvar readSSLConfigFromEnvironment = function () {\n  switch (process.env.PGSSLMODE) {\n    case 'disable':\n      return false\n    case 'prefer':\n    case 'require':\n    case 'verify-ca':\n    case 'verify-full':\n      return true\n    case 'no-verify':\n      return { rejectUnauthorized: false }\n  }\n  return defaults.ssl\n}\n\nvar ConnectionParameters = function (config) {\n  // if a string is passed, it is a raw connection string so we parse it into a config\n  config = typeof config === 'string' ? parse(config) : config || {}\n\n  // if the config has a connectionString defined, parse IT into the config we use\n  // this will override other default values with what is stored in connectionString\n  if (config.connectionString) {\n    config = Object.assign({}, config, parse(config.connectionString))\n  }\n\n  this.user = val('user', config)\n  this.database = val('database', config)\n\n  if (this.database === undefined) {\n    this.database = this.user\n  }\n\n  this.port = parseInt(val('port', config), 10)\n  this.host = val('host', config)\n\n  // \"hiding\" the password so it doesn't show up in stack traces\n  // or if the client is console.logged\n  Object.defineProperty(this, 'password', {\n    configurable: true,\n    enumerable: false,\n    writable: true,\n    value: val('password', config),\n  })\n\n  this.binary = val('binary', config)\n\n  this.ssl = typeof config.ssl === 'undefined' ? readSSLConfigFromEnvironment() : config.ssl\n\n  // support passing in ssl=no-verify via connection string\n  if (this.ssl === 'no-verify') {\n    this.ssl = { rejectUnauthorized: false }\n  }\n\n  this.client_encoding = val('client_encoding', config)\n  this.replication = val('replication', config)\n  // a domain socket begins with '/'\n  this.isDomainSocket = !(this.host || '').indexOf('/')\n\n  this.application_name = val('application_name', config, 'PGAPPNAME')\n  this.fallback_application_name = val('fallback_application_name', config, false)\n  this.statement_timeout = val('statement_timeout', config, false)\n  this.idle_in_transaction_session_timeout = val('idle_in_transaction_session_timeout', config, false)\n  this.query_timeout = val('query_timeout', config, false)\n\n  if (config.connectionTimeoutMillis === undefined) {\n    this.connect_timeout = process.env.PGCONNECT_TIMEOUT || 0\n  } else {\n    this.connect_timeout = Math.floor(config.connectionTimeoutMillis / 1000)\n  }\n\n  if (config.keepAlive === false) {\n    this.keepalives = 0\n  } else if (config.keepAlive === true) {\n    this.keepalives = 1\n  }\n\n  if (typeof config.keepAliveInitialDelayMillis === 'number') {\n    this.keepalives_idle = Math.floor(config.keepAliveInitialDelayMillis / 1000)\n  }\n}\n\n// Convert arg to a string, surround in single quotes, and escape single quotes and backslashes\nvar quoteParamValue = function (value) {\n  return \"'\" + ('' + value).replace(/\\\\/g, '\\\\\\\\').replace(/'/g, \"\\\\'\") + \"'\"\n}\n\nvar add = function (params, config, paramName) {\n  var value = config[paramName]\n  if (value !== undefined && value !== null) {\n    params.push(paramName + '=' + quoteParamValue(value))\n  }\n}\n\nConnectionParameters.prototype.getLibpqConnectionString = function (cb) {\n  var params = []\n  add(params, this, 'user')\n  add(params, this, 'password')\n  add(params, this, 'port')\n  add(params, this, 'application_name')\n  add(params, this, 'fallback_application_name')\n  add(params, this, 'connect_timeout')\n\n  var ssl = typeof this.ssl === 'object' ? this.ssl : this.ssl ? { sslmode: this.ssl } : {}\n  add(params, ssl, 'sslmode')\n  add(params, ssl, 'sslca')\n  add(params, ssl, 'sslkey')\n  add(params, ssl, 'sslcert')\n  add(params, ssl, 'sslrootcert')\n\n  if (this.database) {\n    params.push('dbname=' + quoteParamValue(this.database))\n  }\n  if (this.replication) {\n    params.push('replication=' + quoteParamValue(this.replication))\n  }\n  if (this.host) {\n    params.push('host=' + quoteParamValue(this.host))\n  }\n  if (this.isDomainSocket) {\n    return cb(null, params.join(' '))\n  }\n  if (this.client_encoding) {\n    params.push('client_encoding=' + quoteParamValue(this.client_encoding))\n  }\n  dns.lookup(this.host, function (err, address) {\n    if (err) return cb(err, null)\n    params.push('hostaddr=' + quoteParamValue(address))\n    return cb(null, params.join(' '))\n  })\n}\n\nmodule.exports = ConnectionParameters\n"]},"metadata":{},"sourceType":"script"}